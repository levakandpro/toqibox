# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –£–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:

1. **Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω:** `https://toqibox.win/api/tg/webhook`
2. **–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω:** `@toqibox_bot`

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å chat_id

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@toqibox_bot`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/start` –∏–ª–∏ "–ü—Ä–∏–≤–µ—Ç")
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è chat_id:
   ```bash
   node get-chat-id.js
   ```
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `chat_id` (—á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `123456789`)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç):**

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `<BOT_TOKEN>` –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω):
```
https://api.telegram.org/bot8405827498:AAGbTkz1L1lcjO3-MslEdB_Ui_j3rDab8sI/getUpdates
```

–ù–∞–π–¥–∏—Ç–µ –≤ –æ—Ç–≤–µ—Ç–µ `"chat":{"id":123456789}` - —ç—Ç–æ –≤–∞—à chat_id.

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Cloudflare Pages

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Cloudflare Pages Dashboard](https://dash.cloudflare.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `toqibox`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Environment Variables**
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ **Production** (–∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π)
5. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å |
|------------|----------|--------------|
| `TELEGRAM_BOT_TOKEN` | `8405827498:AAGbTkz1L1lcjO3-MslEdB_Ui_j3rDab8sI` | ‚úÖ –£–∂–µ –µ—Å—Ç—å |
| `TELEGRAM_ADMIN_CHAT_ID` | `–≤–∞—à_chat_id` | –ò–∑ —à–∞–≥–∞ 1 |
| `SUPABASE_URL` | `–≤–∞—à_supabase_url` | –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `VITE_SUPABASE_URL` |
| `SUPABASE_SERVICE_ROLE_KEY` | `–≤–∞—à_service_role_key` | Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí Service Role Key |

**–í–∞–∂–Ω–æ:**
- `SUPABASE_SERVICE_ROLE_KEY` - —ç—Ç–æ **–ù–ï** `VITE_SUPABASE_ANON_KEY`!
- Service Role Key - —ç—Ç–æ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- –ü–æ–ª—É—á–∏—Ç—å –º–æ–∂–Ω–æ –≤: Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí **Service Role** (secret)

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

1. –í Cloudflare Pages Dashboard –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãØ) —Ä—è–¥–æ–º —Å –¥–µ–ø–ª–æ–µ–º
4. –í—ã–±–µ—Ä–∏—Ç–µ **Retry deployment**

–ò–ª–∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞.

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É (—á–µ—Ä–µ–∑ `/pricing` –∏–ª–∏ `/payment`)
2. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å –∫–Ω–æ–ø–∫–∞–º–∏ "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å" –∏ "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å"
3. –ù–∞–∂–º–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–Ω–æ–ø–æ–∫ - –∑–∞—è–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ü—Ä–æ–±–ª–µ–º–∞: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Cloudflare Pages
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Cloudflare Pages Functions:
   - –í Cloudflare Pages Dashboard ‚Üí Functions ‚Üí View logs
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ `/api/tg/notify-payment-request`

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–Ω–æ–ø–∫–∏ –Ω–µ –æ—Ç–≤–µ—á–∞—é—Ç)

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:
   ```bash
   node setup-webhook.js
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `TELEGRAM_ADMIN_CHAT_ID` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤–∞—à–∏–º chat_id
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Cloudflare Pages Functions:
   - –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ `/api/tg/webhook`

### –ü—Ä–æ–±–ª–µ–º–∞: Chat_id –Ω–µ –Ω–∞–π–¥–µ–Ω

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É `@toqibox_bot`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `node get-chat-id.js` —Å–Ω–æ–≤–∞
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (—Å–º. –®–∞–≥ 1)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–°–º. —Ñ–∞–π–ª `TELEGRAM_SETUP.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
