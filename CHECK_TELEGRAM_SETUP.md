# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

‚úÖ **TELEGRAM_BOT_TOKEN** - –¥–æ–±–∞–≤–ª–µ–Ω –≤ Cloudflare Pages  
‚úÖ **TELEGRAM_ADMIN_CHAT_ID** - `8247308735` (–¥–æ–±–∞–≤–ª–µ–Ω)  
‚úÖ **Webhook** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `https://toqibox.win/api/tg/webhook`  

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

### 1. SUPABASE_URL
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `VITE_SUPABASE_URL`
- –í Cloudflare Pages —É–∂–µ –µ—Å—Ç—å `VITE_SUPABASE_URL` = `https://iqgjoyqjtagiesbfahiu.supabase.co`
- –î–æ–±–∞–≤—å—Ç–µ **—Ç–æ—á–Ω–æ —Ç–∞–∫–æ–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ** –∫–∞–∫ `SUPABASE_URL` (–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ VITE_)
- –¢–∏–ø: `Plaintext`

### 2. SUPABASE_SERVICE_ROLE_KEY
- **–ì–¥–µ –≤–∑—è—Ç—å:** 
  1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
  2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
  3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API**
  4. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Service Role** (–Ω–µ "anon" –∏–ª–∏ "public"!)
  5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)
- **–¢–∏–ø:** `Secret` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
- **–í–ê–ñ–ù–û:** –≠—Ç–æ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏, –ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ –µ–≥–æ!

## –®–∞–≥–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Cloudflare Pages Dashboard ‚Üí Settings ‚Üí Environment Variables ‚Üí Production
2. –ù–∞–∂–º–∏—Ç–µ **"+ Add"**
3. –î–æ–±–∞–≤—å—Ç–µ `SUPABASE_URL`:
   - Name: `SUPABASE_URL`
   - Value: (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `VITE_SUPABASE_URL`)
   - Type: `Plaintext`
4. –î–æ–±–∞–≤—å—Ç–µ `SUPABASE_SERVICE_ROLE_KEY`:
   - Name: `SUPABASE_SERVICE_ROLE_KEY`
   - Value: (–∏–∑ Supabase Dashboard)
   - Type: `Secret` ‚ö†Ô∏è

## –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π:**
   - Cloudflare Pages ‚Üí Deployments
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãØ) —Ä—è–¥–æ–º —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–µ–ø–ª–æ–µ–º
   - –í—ã–±–µ—Ä–∏—Ç–µ **Retry deployment**

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - Cloudflare Pages ‚Üí Functions ‚Üí View logs
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:**
   - –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É (—á–µ—Ä–µ–∑ `/pricing` –∏–ª–∏ `/payment`)
   - –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram (`8247308735`)
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å" –∏–ª–∏ "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å"
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞—è–≤–∫–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://toqibox.win/api/tg/notify-payment-request
```

–ï—Å–ª–∏ –≤–µ—Ä–Ω—ë—Ç—Å—è `{"error":"payment_request_id is required"}` - –∑–Ω–∞—á–∏—Ç —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ –º–µ—Å—Ç–µ).  
–ï—Å–ª–∏ –≤–µ—Ä–Ω—ë—Ç—Å—è `{"error":"Server configuration error"}` - –∑–Ω–∞—á–∏—Ç –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:
```bash
node setup-webhook.js
```

–î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å: `‚úÖ Webhook –ø—Ä–æ–≤–µ—Ä–µ–Ω: URL: https://toqibox.win/api/tg/webhook`

## ‚ùå –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ 4 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Functions –≤ Cloudflare Pages

2. **–ö–Ω–æ–ø–∫–∏ –≤ Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `TELEGRAM_ADMIN_CHAT_ID` = `8247308735`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webhook –≤ Cloudflare Pages Functions

3. **–û—à–∏–±–∫–∞ "Server configuration error":**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `SUPABASE_SERVICE_ROLE_KEY` –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ Secret
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
